(function(t){function e(e){for(var n,o,i=e[0],s=e[1],u=e[2],l=0,d=[];l<i.length;l++)o=i[l],Object.prototype.hasOwnProperty.call(c,o)&&c[o]&&d.push(c[o][0]),c[o]=0;for(n in s)Object.prototype.hasOwnProperty.call(s,n)&&(t[n]=s[n]);h&&h(e);while(d.length)d.shift()();return r.push.apply(r,u||[]),a()}function a(){for(var t,e=0;e<r.length;e++){for(var a=r[e],n=!0,o=1;o<a.length;o++){var i=a[o];0!==c[i]&&(n=!1)}n&&(r.splice(e--,1),t=s(s.s=a[0]))}return t}var n={},o={app:0},c={app:0},r=[];function i(t){return s.p+"js/"+({}[t]||t)+"."+{"chunk-08fb3f86":"4a25617b","chunk-25988c05":"2fc12bce","chunk-2df4f170":"74e2ece5","chunk-393c156e":"92f411db","chunk-513e6828":"82635ee6","chunk-6ddb7a54":"9e874d05","chunk-ca3e8e00":"3af29ea2","chunk-dc8085ac":"a56525d6","chunk-e81c6adc":"5cbfbb3c","chunk-f61778e0":"ec1860db"}[t]+".js"}function s(e){if(n[e])return n[e].exports;var a=n[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,s),a.l=!0,a.exports}s.e=function(t){var e=[],a={"chunk-08fb3f86":1,"chunk-25988c05":1,"chunk-2df4f170":1,"chunk-393c156e":1,"chunk-513e6828":1,"chunk-6ddb7a54":1,"chunk-ca3e8e00":1,"chunk-dc8085ac":1,"chunk-e81c6adc":1,"chunk-f61778e0":1};o[t]?e.push(o[t]):0!==o[t]&&a[t]&&e.push(o[t]=new Promise((function(e,a){for(var n="css/"+({}[t]||t)+"."+{"chunk-08fb3f86":"7176bf96","chunk-25988c05":"7e389de1","chunk-2df4f170":"80037d5a","chunk-393c156e":"69283ac2","chunk-513e6828":"992dda7b","chunk-6ddb7a54":"0813b74b","chunk-ca3e8e00":"fd23d85f","chunk-dc8085ac":"4e3fd65d","chunk-e81c6adc":"c11271ac","chunk-f61778e0":"88056695"}[t]+".css",c=s.p+n,r=document.getElementsByTagName("link"),i=0;i<r.length;i++){var u=r[i],l=u.getAttribute("data-href")||u.getAttribute("href");if("stylesheet"===u.rel&&(l===n||l===c))return e()}var d=document.getElementsByTagName("style");for(i=0;i<d.length;i++){u=d[i],l=u.getAttribute("data-href");if(l===n||l===c)return e()}var h=document.createElement("link");h.rel="stylesheet",h.type="text/css",h.onload=e,h.onerror=function(e){var n=e&&e.target&&e.target.src||c,r=new Error("Loading CSS chunk "+t+" failed.\n("+n+")");r.code="CSS_CHUNK_LOAD_FAILED",r.request=n,delete o[t],h.parentNode.removeChild(h),a(r)},h.href=c;var f=document.getElementsByTagName("head")[0];f.appendChild(h)})).then((function(){o[t]=0})));var n=c[t];if(0!==n)if(n)e.push(n[2]);else{var r=new Promise((function(e,a){n=c[t]=[e,a]}));e.push(n[2]=r);var u,l=document.createElement("script");l.charset="utf-8",l.timeout=120,s.nc&&l.setAttribute("nonce",s.nc),l.src=i(t);var d=new Error;u=function(e){l.onerror=l.onload=null,clearTimeout(h);var a=c[t];if(0!==a){if(a){var n=e&&("load"===e.type?"missing":e.type),o=e&&e.target&&e.target.src;d.message="Loading chunk "+t+" failed.\n("+n+": "+o+")",d.name="ChunkLoadError",d.type=n,d.request=o,a[1](d)}c[t]=void 0}};var h=setTimeout((function(){u({type:"timeout",target:l})}),12e4);l.onerror=l.onload=u,document.head.appendChild(l)}return Promise.all(e)},s.m=t,s.c=n,s.d=function(t,e,a){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(s.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)s.d(a,n,function(e){return t[e]}.bind(null,n));return a},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="",s.oe=function(t){throw console.error(t),t};var u=window["webpackJsonp"]=window["webpackJsonp"]||[],l=u.push.bind(u);u.push=e,u=u.slice();for(var d=0;d<u.length;d++)e(u[d]);var h=l;r.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"1c7e":function(t,e,a){},2395:function(t,e,a){},4045:function(t,e,a){t.exports=a.p+"img/loading.b82d1882.svg"},4360:function(t,e,a){"use strict";a("99af"),a("9911");var n,o,c=a("ade3"),r=a("2909"),i=a("2b0e"),s=a("2f62"),u=a("6e87"),l=a("4ec3");i["a"].use(s["a"]),e["a"]=new s["a"].Store({state:{navActive:"书架",loading:!1,sortData:{},sortBookList:[],bookShortComments:[],bookComments:[],recommendList:[],chapterList:[],currentChapter:{},currentRankBooks:[]},mutations:(n={},Object(c["a"])(n,u["a"].CHANGE_NAV_ACTIVE,(function(t,e){switch(e.active){case"shelf":t.navActive="书架";break;case"sort":t.navActive="分类";break;case"rank":t.navActive="排行";break;case"list":t.navActive="书单";break}})),Object(c["a"])(n,u["a"].INIT_SORT_DATA,(function(t,e){t.sortData=e.data})),Object(c["a"])(n,u["a"].GET_SORT_DETAIL_BOOKS,(function(t,e){t.sortBookList=e.data.books})),Object(c["a"])(n,u["a"].GET_MORE_SORT_BOOKS,(function(t,e){t.sortBookList=[].concat(Object(r["a"])(t.sortBookList),Object(r["a"])(e.data.books))})),Object(c["a"])(n,u["a"].CHANGE_LOADING_ACTIVE,(function(t,e){t.loading=e.loading})),Object(c["a"])(n,u["a"].GET_BOOK_SHORT_COMMENT,(function(t,e){t.bookShortComments=e.data.docs})),Object(c["a"])(n,u["a"].GET_BOOK_COMMENT,(function(t,e){t.bookComments=e.data.reviews})),Object(c["a"])(n,u["a"].GET_RECOMMEND_BOOK,(function(t,e){t.recommendList=e.data.books})),Object(c["a"])(n,u["a"].GET_BOOK_CHAPTER,(function(t,e){t.chapterList=e.data.chapters})),Object(c["a"])(n,u["a"].GET_CURREN_BOOK_LINK,(function(t,e){t.currentChapter=e.data})),Object(c["a"])(n,u["a"].GET_ONE_BOOK_LINK,(function(t,e){t.chapterList=e.chapters,t.currentChapter=e.currentChapter})),Object(c["a"])(n,u["a"].GET_RANK_BOOKS,(function(t,e){t.currentRankBooks=e.data.ranking.books})),n),actions:(o={},Object(c["a"])(o,u["a"].INIT_SORT_DATA,(function(t){var e=JSON.parse(localStorage.getItem("sort"));e&&e.expires>Date.now()?t.commit(u["a"].INIT_SORT_DATA,{data:e.data}):(t.state.loading=!0,Object(l["c"])("https://novel.kele8.cn/categories").then((function(e){localStorage.setItem("sort",JSON.stringify({expires:Date.now()+864e5,data:e.data})),t.commit(u["a"].INIT_SORT_DATA,{data:e.data}),t.state.loading=!1})).catch((function(e){console.log(e),t.state.loading=!1})))})),Object(c["a"])(o,u["a"].GET_SORT_DETAIL_BOOKS,(function(t,e){t.state.loading=!0,Object(l["c"])("https://api.kele8.cn/agent/https://novel.kele8.cn/category-info",e).then((function(e){t.commit(u["a"].GET_SORT_DETAIL_BOOKS,{data:e.data}),t.state.loading=!1})).catch((function(e){console.log(e),t.state.loading=!1}))})),Object(c["a"])(o,u["a"].GET_MORE_SORT_BOOKS,(function(t,e){t.state.loading=!0,Object(l["c"])("https://api.kele8.cn/agent/https://novel.kele8.cn/category-info",e).then((function(e){0!=e.data.length?t.commit(u["a"].GET_MORE_SORT_BOOKS,{data:e.data}):i["a"].$toast({message:"此类没有更多的书籍了",forbidClick:!0,duration:2e3,icon:"fail"}),t.state.loading=!1})).catch((function(e){console.log(e),t.state.loading=!1}))})),Object(c["a"])(o,u["a"].GET_BOOK_SHORT_COMMENT,(function(t,e){var a=JSON.parse(localStorage.getItem("sc-"+e.book));a&&a.expires>Date.now()?t.commit(u["a"].GET_BOOK_SHORT_COMMENT,{data:a.data}):(t.state.loading=!0,Object(l["c"])("https://novel.kele8.cn/book/short-reviews",e).then((function(a){t.commit(u["a"].GET_BOOK_SHORT_COMMENT,{data:a.data}),localStorage.setItem("sc-"+e.book,JSON.stringify({expires:Date.now()+864e5,data:a.data})),t.state.loading=!1})).catch((function(e){console.log(e),t.state.loading=!1})))})),Object(c["a"])(o,u["a"].GET_BOOK_COMMENT,(function(t,e){var a=JSON.parse(localStorage.getItem("c-"+e.book));a&&a.expires>Date.now()?t.commit(u["a"].GET_BOOK_COMMENT,{data:a.data}):(t.state.loading=!0,Object(l["c"])("https://novel.kele8.cn/book/reviews",e).then((function(a){localStorage.setItem("c-"+e.book,JSON.stringify({expires:Date.now()+864e5,data:a.data})),t.commit(u["a"].GET_BOOK_COMMENT,{data:a.data}),t.state.loading=!1})).catch((function(e){console.log(e),t.state.loading=!1})))})),Object(c["a"])(o,u["a"].GET_RECOMMEND_BOOK,(function(t,e){var a=JSON.parse(localStorage.getItem("rec-"+e.id));a&&a.expires>Date.now()?t.commit(u["a"].GET_RECOMMEND_BOOK,{data:a.data}):(t.state.loading=!0,Object(l["c"])("https://novel.kele8.cn/recommend/"+e.id).then((function(a){localStorage.setItem("rec-"+e.id,JSON.stringify({expires:Date.now()+864e5,data:a.data})),t.commit(u["a"].GET_RECOMMEND_BOOK,{data:a.data}),t.state.loading=!1})).catch((function(e){console.log(e),t.state.loading=!1})))})),Object(c["a"])(o,u["a"].GET_BOOK_CHAPTER,(function(t,e){t.state.loading=!0,Object(l["c"])("https://api.kele8.cn/agent/https://novel.kele8.cn/book-sources",e).then((function(e){var a=e.data[0]._id;Object(l["c"])("https://novel.kele8.cn/book-chapters/"+a).then((function(e){t.commit(u["a"].GET_BOOK_CHAPTER,{data:e.data}),t.state.loading=!1})).catch((function(e){console.log(e),t.state.loading=!1}))})).catch((function(e){console.log(e),t.state.loading=!1}))})),Object(c["a"])(o,u["a"].GET_CURREN_BOOK_LINK,(function(t,e){t.state.loading=!0;var a=encodeURIComponent(e.link);Object(l["c"])("https://novel.kele8.cn/chapters/"+a).then((function(e){t.commit(u["a"].GET_CURREN_BOOK_LINK,{data:e.data.chapter}),t.state.loading=!1})).catch((function(e){console.log(e),t.state.loading=!1}))})),Object(c["a"])(o,u["a"].GET_ONE_BOOK_LINK,(function(t,e){t.state.loading=!0,Object(l["c"])("https://api.kele8.cn/agent/https://novel.kele8.cn/book-sources",{view:"summary",book:e.id}).then((function(a){var n=a.data[0]._id;Object(l["c"])("https://novel.kele8.cn/book-chapters/"+n).then((function(a){var n=a.data.chapters,o=n[e.index].link,c=encodeURIComponent(o);Object(l["c"])("https://novel.kele8.cn/chapters/"+c).then((function(e){t.commit(u["a"].GET_ONE_BOOK_LINK,{chapters:n,currentChapter:e.data.chapter}),t.state.loading=!1})).catch((function(e){console.log(e),t.state.loading=!1}))})).catch((function(e){console.log(e),t.state.loading=!1}))})).catch((function(e){console.log(e),t.state.loading=!1}))})),Object(c["a"])(o,u["a"].GET_RANK_BOOKS,(function(t,e){var a=JSON.parse(localStorage.getItem("rankbook-"+e.id));a&&a.expires>Date.now()?t.commit(u["a"].GET_RANK_BOOKS,{data:a.data}):(t.state.loading=!0,Object(l["c"])("https://novel.kele8.cn/rank/"+e.id).then((function(a){localStorage.setItem("rankbook-"+e.id,JSON.stringify({expires:Date.now()+864e5,data:a.data})),t.commit(u["a"].GET_RANK_BOOKS,{data:a.data}),t.state.loading=!1})).catch((function(e){console.log(e),t.state.loading=!1})))})),o)})},"4ec3":function(t,e,a){"use strict";a.d(e,"c",(function(){return n})),a.d(e,"b",(function(){return o})),a.d(e,"a",(function(){return c}));a("d81d"),a("ac1f"),a("1276"),a("be3b");var n=function(t,e){return e?window.axios.get(t,{params:e}):window.axios.get(t)},o=function(t){var e=new Date(t),a=e.getTime(),n=Date.now(),o=n-a,c="";return c=Math.floor(o/864e5/365)>=1?Math.floor(o/864e5/365)+"年前":Math.floor(o/864e5/30)>=1?Math.floor(o/864e5/30)+"个月前":Math.floor(o/864e5)>=1?Math.floor(o/864e5)+"天前":Math.floor(o/36e5)>=1?Math.floor(o/36e5)+"小时前":Math.floor(o/6e4)>=1?Math.floor(o/6e4)+"分钟前":"",c},c=function(t){return t.split("\r\n").map((function(t){return t}))}},"56d7":function(t,e,a){"use strict";a.r(e);a("e260"),a("e6cf"),a("cca6"),a("a79d");var n=a("2b0e"),o=(a("be3b"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("router-view"),"*"!=t.active?a("van-tabbar",{attrs:{"active-color":"#e4393c",route:""},model:{value:t.active,callback:function(e){t.active=e},expression:"active"}},[a("van-tabbar-item",{attrs:{name:"shelf",replace:"",to:"/",icon:"bar-chart-o"}},[t._v(" 书架 ")]),a("van-tabbar-item",{attrs:{name:"sort",replace:"",to:"/booksort",icon:"points"}},[t._v(" 分类 ")]),a("van-tabbar-item",{attrs:{name:"rank",replace:"",to:"/bookrank",icon:"chart-trending-o"}},[t._v(" 排行 ")]),a("van-tabbar-item",{attrs:{name:"list",replace:"",to:"/booklist",icon:"column"}},[t._v(" 书单 ")])],1):t._e(),a("LoadingView",{staticClass:"loading",attrs:{showLoading:t.loading}})],1)}),c=[],r=a("5530"),i=a("2f62"),s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"show",rawName:"v-show",value:t.showLoading,expression:"showLoading"}]},[n("img",{staticClass:"auto-img",attrs:{src:a("4045")}})])},u=[],l={name:"LoadingView",props:{showLoading:Boolean}},d=l,h=(a("f87f"),a("2877")),f=Object(h["a"])(d,s,u,!1,null,"79eb2658",null),O=f.exports,p=a("6e87"),_={name:"app",data:function(){return{active:"shelf"}},components:{LoadingView:O},computed:Object(r["a"])({},Object(i["d"])({loading:function(t){return t.loading}})),methods:Object(r["a"])({},Object(i["c"])({navchange:p["a"].CHANGE_NAV_ACTIVE})),watch:{active:function(t){this.navchange({active:t})}},beforeUpdate:function(){switch(this.$route.path){case"/":this.active="shelf";break;case"/booksort":this.active="sort";break;case"/bookrank":this.active="rank";break;case"/booklist":this.active="list";break;default:this.active="*";break}}},b=_,m=(a("7c55"),Object(h["a"])(b,o,c,!1,null,null,null)),g=m.exports,k=a("8c4f"),T=[{path:"/",name:"Bookshelf",component:function(t){return a.e("chunk-e81c6adc").then(function(){var e=[a("71ec")];t.apply(null,e)}.bind(this)).catch(a.oe)}},{path:"/booksort",name:"BookSort",component:function(t){return a.e("chunk-6ddb7a54").then(function(){var e=[a("4e28")];t.apply(null,e)}.bind(this)).catch(a.oe)}},{path:"/bookrank",name:"BookRank",component:function(t){return a.e("chunk-25988c05").then(function(){var e=[a("1ecb")];t.apply(null,e)}.bind(this)).catch(a.oe)}},{path:"/booklist",name:"BookList",component:function(t){return a.e("chunk-2df4f170").then(function(){var e=[a("0e6d")];t.apply(null,e)}.bind(this)).catch(a.oe)}},{path:"/sortdetail/:major&:target",name:"SortDetail",component:function(t){return a.e("chunk-ca3e8e00").then(function(){var e=[a("cd7b")];t.apply(null,e)}.bind(this)).catch(a.oe)}},{path:"/bookdetail/:id",name:"BookDetail",component:function(t){return a.e("chunk-f61778e0").then(function(){var e=[a("1253")];t.apply(null,e)}.bind(this)).catch(a.oe)}},{path:"/bookchapter/:title&:id",name:"BookChapter",component:function(t){return a.e("chunk-513e6828").then(function(){var e=[a("c0db")];t.apply(null,e)}.bind(this)).catch(a.oe)}},{path:"/read/:title&:id&:index",name:"Read",component:function(t){return a.e("chunk-dc8085ac").then(function(){var e=[a("c844")];t.apply(null,e)}.bind(this)).catch(a.oe)}},{path:"/listdetail/:id",name:"ListDetail",component:function(t){return a.e("chunk-393c156e").then(function(){var e=[a("152e")];t.apply(null,e)}.bind(this)).catch(a.oe)}},{path:"/search",name:"Search",component:function(t){return a.e("chunk-08fb3f86").then(function(){var e=[a("2d3b")];t.apply(null,e)}.bind(this)).catch(a.oe)}}];n["a"].use(k["a"]);var E=k["a"].prototype.push;k["a"].prototype.push=function(t){return E.call(this,t).catch((function(t){return t}))};var v=new k["a"]({routes:T}),N=v,S=a("4360"),K=(a("5852"),a("d961")),B=(a("e17f"),a("2241")),C=(a("4142"),a("39d1")),R=(a("e7e5"),a("d399")),A=(a("c3a6"),a("ad06")),G=(a("a52c"),a("2ed4")),j=(a("537a"),a("ac28"));n["a"].use(j["a"]),n["a"].use(G["a"]),n["a"].use(A["a"]),n["a"].use(R["a"]),n["a"].use(C["a"]),n["a"].use(B["a"]),n["a"].use(K["a"]),n["a"].config.productionTip=!1,N.afterEach((function(t,e,a){window.scrollTo(0,0)})),new n["a"]({router:N,store:S["a"],render:function(t){return t(g)}}).$mount("#app")},"6e87":function(t,e,a){"use strict";e["a"]={CHANGE_NAV_ACTIVE:"CHANGE_NAV_ACTIVE",CHANGE_LOADING_ACTIVE:"CHANGE_LOADING_ACTIVE",INIT_SORT_DATA:"INIT_SORT_DATA",GET_SORT_DETAIL_BOOKS:"GET_SORT_DETAIL_BOOKS",GET_MORE_SORT_BOOKS:"GET_MORE_SORT_BOOKS",CLEAR_SORT_BOOKS:"CLEAR_SORT_BOOKS",GET_BOOK_SHORT_COMMENT:"GET_BOOK_SHORT_COMMENT",GET_BOOK_COMMENT:"GET_BOOK_COMMENT",GET_RECOMMEND_BOOK:"GET_RECOMMEND_BOOK",GET_BOOK_CHAPTER:"GET_BOOK_CHAPTER",GET_CURREN_BOOK_LINK:"GET_CURRENT_BOOK_LINK",GET_ONE_BOOK_LINK:"GET_ONE_BOOK_LINK",GET_RANK_BOOKS:"GET_RANK_BOOKS",GET_BOOK_LIST:"GET_BOOK_LIST"}},"7c55":function(t,e,a){"use strict";var n=a("2395"),o=a.n(n);o.a},be3b:function(t,e,a){"use strict";a("d3b7");var n=a("2b0e"),o=a("bc3a"),c=a.n(o),r={},i=c.a.create(r);i.interceptors.request.use((function(t){return t}),(function(t){return Promise.reject(t)})),i.interceptors.response.use((function(t){return t}),(function(t){return Promise.reject(t)})),Plugin.install=function(t,e){t.axios=i,window.axios=i,Object.defineProperties(t.prototype,{axios:{get:function(){return i}},$axios:{get:function(){return i}}})},n["a"].use(Plugin);Plugin},f87f:function(t,e,a){"use strict";var n=a("1c7e"),o=a.n(n);o.a}});
//# sourceMappingURL=app.9a1ecb15.js.map