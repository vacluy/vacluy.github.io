(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-19c400b0"],{1148:function(t,e,a){"use strict";var s=a("a691"),i=a("1d80");t.exports="".repeat||function(t){var e=String(i(this)),a="",o=s(t);if(o<0||o==1/0)throw RangeError("Wrong number of repetitions");for(;o>0;(o>>>=1)&&(e+=e))1&o&&(a+=e);return a}},1253:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"bt-head"},[s("div",{staticClass:"bt-nav"},[s("van-icon",{attrs:{name:"arrow-left"},on:{click:t.routeBack}}),s("van-icon",{attrs:{name:"share"}})],1),s("div",{staticClass:"bt-detail"},[s("div",{staticClass:"d-img"},[s("img",{attrs:{src:"http://statics.zhuishushenqi.com"+t.book.cover,alt:""}})]),s("div",{staticClass:"d-info"},[s("div",{staticClass:"b-title"},[t._v(t._s(t.book.title))]),s("div",{staticClass:"b-author"},[s("span",{staticClass:"author"},[t._v(t._s(t.book.author))]),s("span",{staticClass:"line"},[t._v("|")]),s("span",[t._v(t._s(t.book.copyright))]),s("span",{staticClass:"line"},[t._v("|")]),s("span",[t._v(t._s(t.book.isSerial?"连载中":"已完结"))])]),s("div",{staticClass:"b-wordCount"},[s("span",{staticClass:"msg"},[t._v("5书币/千字")]),s("span",{staticClass:"line"},[t._v("|")]),s("span",[t._v(t._s(t.conversion(t.book.wordCount,0,"万字")))])]),s("div",{staticClass:"b-vip"},[s("span",[t._v("6元开通VIP，全书免广告!")]),s("van-icon",{staticStyle:{bottom:"-1px"},attrs:{name:"arrow"}})],1)])])]),s("div",{staticClass:"bt-contain"},[s("div",{staticClass:"bt-card"},[t.book.rating?s("div",{staticClass:"bt-score"},[s("div",{staticClass:"score-content"},[s("div",{staticClass:"score-text"},[t._v(" "+t._s(t.retainOne(t.book.rating.score))+" ")]),s("van-rate",{attrs:{size:"14px",gutter:"1",count:"5",color:"#FFCD3E","void-color":"#C8C7CC","allow-half":"",readonly:""},model:{value:t.score,callback:function(e){t.score=e},expression:"score"}})],1),s("div",{staticClass:"score-partake"},[s("span",[t._v(t._s(t.book.rating.tip))]),s("van-icon",{staticStyle:{bottom:"-1px"},attrs:{name:"arrow"}})],1)]):t._e(),s("div",{staticClass:"bt-retain"},[s("span",{staticClass:"retain-per"},[t._v(t._s(t.book.retentionRatio)+"%")]),s("span",{staticClass:"retain-title"},[t._v("读者留存")])]),s("div",{staticClass:"bt-pop"},[s("span",{staticClass:"pop-count"},[t._v(t._s(t.conversion(t.book.latelyFollower,1,"万")))]),s("span",{staticClass:"pop-title"},[t._v("7日人气")])]),s("div",{staticClass:"bt-totalpop"},[s("span",{staticClass:"total-count"},[t._v(t._s(t.conversion(t.book.totalFollower,1,"万")))]),s("span",{staticClass:"total-title"},[t._v("累计人气")])])]),s("div",{staticClass:"bt-card"},[s("div",{staticClass:"bt-synopsis"},[s("div",{staticClass:"sy-head"},[s("div",{staticClass:"title"},[t._v("简介")]),s("ul",{staticClass:"sy-tags"},t._l(t.book.tags,(function(t,e){return s("TagItem",{key:e,attrs:{item:t,activeIndex:e}})})),1)]),s("div",{staticClass:"sy-middle"},[s("p",{staticClass:"info",class:{show:t.showInfo}},[t._v(" "+t._s(t.book.longIntro)+" ")]),t.showInfo?s("van-icon",{staticClass:"arrow",attrs:{name:"arrow-up"},on:{click:function(e){t.showInfo=!1}}}):s("van-icon",{staticClass:"arrow",attrs:{name:"arrow-down"},on:{click:function(e){t.showInfo=!0}}})],1),s("div",{staticClass:"sy-foot",on:{click:t.routeTo}},[s("div",{staticClass:"fl"},[t._v("目录")]),s("div",{staticClass:"fr"},[s("span",{staticClass:"last-update"},[t._v(t._s(t.updated))]),s("span",{staticClass:"book-link"},[t._v(t._s(t.book.lastChapter))]),s("van-icon",{attrs:{name:"arrow"}})],1)])])]),s("div",{staticClass:"bt-card"},[s("div",{staticClass:"short-comment"},[s("div",{staticClass:"comment-title"},[t._v("热门短评")]),s("ul",{staticClass:"comments"},t._l(t.shortComments,(function(t,e){return s("Comment",{key:e,attrs:{item:t}})})),1)])]),s("div",{staticClass:"bt-card"},[s("div",{staticClass:"comment"},[s("div",{staticClass:"comment-title"},[t._v("热门书评")]),s("ul",{staticClass:"comments"},t._l(t.comments,(function(t,e){return s("Comment",{key:e,attrs:{item:t}})})),1)])]),s("div",{staticClass:"bt-card"},[s("div",{staticClass:"recommend"},[s("div",{staticClass:"recommend-title"},[t._v("本书其他推荐")]),s("ul",{staticClass:"r-list"},t._l(t.limitRecommendList,(function(t,e){return s("RecommendItem",{key:e,attrs:{item:t}})})),1)])])]),s("div",{staticClass:"btn"},[s("div",{staticClass:"book-shelf"},[t.isAddShelf?s("div",{staticClass:"added"},[s("van-icon",{staticClass:"add-icon",attrs:{name:"certificate"}}),s("span",[t._v("已加入书架")])],1):s("div",{staticClass:"adding",on:{click:t.addShelf}},[s("img",{attrs:{src:a("9b98")}}),s("span",[t._v("加入书架")])])]),s("div",{staticClass:"book-read"},[t.isAddShelf?s("span",{on:{click:t.continueRead}},[t._v("继续阅读")]):s("span",{on:{click:t.startRead}},[t._v("开始阅读")])])])])},i=[],o=(a("99af"),a("a434"),a("a9e3"),a("b680"),a("2909")),n=a("ade3"),r=a("5530"),c=a("2f62"),l=a("6e87"),d=a("bb8d"),u=a("4360"),m=a("4ec3"),f=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("li",[s("div",{staticClass:"c-head"},[t.item.author?s("div",{staticClass:"c-personal"},[-1==t.item.author.avatar.indexOf(".png")?s("img",{attrs:{src:"http://statics.zhuishushenqi.com"+t.item.author.avatar,alt:""}}):s("img",{attrs:{src:a("ef75"),alt:""}}),s("span",{staticClass:"c-nickname"},[t._v(t._s(t.item.author.nickname))]),s("span",{staticClass:"c-lv"},[t._v("Lv."+t._s(t.item.author.lv))])]):t._e(),s("div",{staticClass:"c-time"},[t._v(t._s(t.time))])]),s("div",{staticClass:"c-rating"},[s("van-rate",{attrs:{size:"10px",gutter:"1",count:"5",color:"#FFCD3E","void-color":"#C8C7CC","allow-half":"",readonly:""},model:{value:t.item.rating,callback:function(e){t.$set(t.item,"rating",e)},expression:"item.rating"}})],1),t.item.title?s("div",{staticClass:"c-title"},[t._v(t._s(t.item.title))]):t._e(),s("p",{staticClass:"c-content",class:{comment:!t.item.title}},[t._v(" "+t._s(t.item.content)+" ")]),s("div",{staticClass:"c-like"},[s("van-icon",{attrs:{name:"good-job"}}),s("span",{staticClass:"count"},[t._v(t._s(t.item.likeCount))])],1)])},v=[],h={name:"Comment",props:{item:Object},data:function(){return{time:""}},created:function(){this.time=Object(m["b"])(this.item.updated)}},p=h,b=(a("763e"),a("2877")),C=Object(b["a"])(p,f,v,!1,null,"4dc29062",null),_=C.exports,g=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("li",{on:{click:t.routeTo}},[a("img",{staticClass:"recommend-item-img",attrs:{src:"http://statics.zhuishushenqi.com"+t.item.cover}}),a("span",{staticClass:"recommend-item-title"},[t._v(t._s(t.item.title))])])},k=[],O={name:"RecommendItem",props:{item:Object},methods:{routeTo:function(){this.$router.push({name:"BookDetail",params:{id:this.item._id}})}}},x=O,w=(a("35dc"),Object(b["a"])(x,g,k,!1,null,"3ec8b53e",null)),I=w.exports,E={name:"BookDetail",data:function(){return{book:{},score:0,showInfo:!1,updated:"",isAddShelf:!1,limitRecommendList:[]}},components:{TagItem:d["a"],Comment:_,RecommendItem:I},computed:Object(r["a"])({},Object(c["d"])({shortComments:function(t){return t.bookShortComments},comments:function(t){return t.bookComments},recommend:function(t){return t.recommendList}})),methods:Object(r["a"])(Object(r["a"])({conversion:function(t,e,a){return(t/1e4).toFixed(e)+a},retainOne:function(t){return t.toFixed(1)}},Object(c["b"])([l["a"].GET_BOOK_SHORT_COMMENT,l["a"].GET_BOOK_COMMENT,l["a"].GET_RECOMMEND_BOOK])),{},{routeBack:function(){this.$router.push({name:"Bookshelf"})},routeTo:function(){this.$router.push({name:"BookChapter",params:{title:this.book.title,id:this.$route.params.id}})},addShelf:function(){var t=JSON.parse(localStorage.getItem("bookshelf"));t?t.data["book-"+this.$route.params.id]={title:this.book.title,id:this.$route.params.id,index:0}:t={data:Object(n["a"])({},"book-"+this.$route.params.id,{title:this.book.title,id:this.$route.params.id,index:0})},localStorage.setItem("bookshelf",JSON.stringify(t)),this.isAddShelf=!0},startRead:function(){this.$router.push({name:"Read",params:{title:this.book.title,id:this.$route.params.id,index:0}})},continueRead:function(){var t=JSON.parse(localStorage.getItem("bookshelf"));this.$router.push({name:"Read",params:{title:this.book.title,id:t.data["book-"+this.$route.params.id].id,index:t.data["book-"+this.$route.params.id].index}})}}),watch:{recommend:function(t){if(t.length>0)for(var e=0;e<t.length;e++){var a=Math.floor(Math.random(t.length));this.limitRecommendList.length<4&&(this.limitRecommendList=[].concat(Object(o["a"])(this.limitRecommendList),Object(o["a"])(t.splice(a,1))))}},$route:function(t,e){location.reload()}},beforeUpdate:function(){this[l["a"].GET_BOOK_SHORT_COMMENT]({book:this.$route.params.id,type:"mostlike",start:0,limit:5}),this[l["a"].GET_BOOK_COMMENT]({book:this.$route.params.id,type:"comment-count",start:0,limit:5}),this[l["a"].GET_RECOMMEND_BOOK]({id:this.$route.params.id});for(var t=0;t<this.recommend.length;t++){var e=Math.floor(Math.random(this.recommend.length));this.limitRecommendList.length<4&&(this.limitRecommendList=[].concat(Object(o["a"])(this.limitRecommendList),Object(o["a"])(this.recommend.splice(e,1))))}},beforeRouteEnter:function(t,e,a){u["a"].state.loading=!0,Object(m["c"])("https://api.kele8.cn/agent/http://novel.kele8.cn/book-info/"+t.params.id).then((function(e){u["a"].state.loading=!1;var s=Number((100*e.data.rating.score/2/100).toFixed(1)),i=Object(m["b"])(e.data.updated),o=JSON.parse(localStorage.getItem("bookshelf")),n=!1;n=!(!o||!o.data["book-"+t.params.id]),a((function(t){t.book=e.data,t.score=s,t.updated=i,t.isAddShelf=n}))})).catch((function(t){console.log(t),u["a"].state.loading=!1}))}},N=E,S=(a("6d1d"),Object(b["a"])(N,s,i,!1,null,"07712c3d",null));e["default"]=S.exports},"35dc":function(t,e,a){"use strict";var s=a("e10d"),i=a.n(s);i.a},"408a":function(t,e,a){var s=a("c6b6");t.exports=function(t){if("number"!=typeof t&&"Number"!=s(t))throw TypeError("Incorrect invocation");return+t}},5899:function(t,e){t.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(t,e,a){var s=a("1d80"),i=a("5899"),o="["+i+"]",n=RegExp("^"+o+o+"*"),r=RegExp(o+o+"*$"),c=function(t){return function(e){var a=String(s(e));return 1&t&&(a=a.replace(n,"")),2&t&&(a=a.replace(r,"")),a}};t.exports={start:c(1),end:c(2),trim:c(3)}},"6d1d":function(t,e,a){"use strict";var s=a("bd50"),i=a.n(s);i.a},7156:function(t,e,a){var s=a("861d"),i=a("d2bb");t.exports=function(t,e,a){var o,n;return i&&"function"==typeof(o=e.constructor)&&o!==a&&s(n=o.prototype)&&n!==a.prototype&&i(t,n),t}},"763e":function(t,e,a){"use strict";var s=a("b4a2"),i=a.n(s);i.a},"9b98":function(t,e,a){t.exports=a.p+"img/add-shelf.b71144fe.svg"},a434:function(t,e,a){"use strict";var s=a("23e7"),i=a("23cb"),o=a("a691"),n=a("50c4"),r=a("7b0b"),c=a("65f0"),l=a("8418"),d=a("1dde"),u=a("ae40"),m=d("splice"),f=u("splice",{ACCESSORS:!0,0:0,1:2}),v=Math.max,h=Math.min,p=9007199254740991,b="Maximum allowed length exceeded";s({target:"Array",proto:!0,forced:!m||!f},{splice:function(t,e){var a,s,d,u,m,f,C=r(this),_=n(C.length),g=i(t,_),k=arguments.length;if(0===k?a=s=0:1===k?(a=0,s=_-g):(a=k-2,s=h(v(o(e),0),_-g)),_+a-s>p)throw TypeError(b);for(d=c(C,s),u=0;u<s;u++)m=g+u,m in C&&l(d,u,C[m]);if(d.length=s,a<s){for(u=g;u<_-s;u++)m=u+s,f=u+a,m in C?C[f]=C[m]:delete C[f];for(u=_;u>_-s+a;u--)delete C[u-1]}else if(a>s)for(u=_-s;u>g;u--)m=u+s-1,f=u+a-1,m in C?C[f]=C[m]:delete C[f];for(u=0;u<a;u++)C[u+g]=arguments[u+2];return C.length=_-s+a,d}})},a9e3:function(t,e,a){"use strict";var s=a("83ab"),i=a("da84"),o=a("94ca"),n=a("6eeb"),r=a("5135"),c=a("c6b6"),l=a("7156"),d=a("c04e"),u=a("d039"),m=a("7c73"),f=a("241c").f,v=a("06cf").f,h=a("9bf2").f,p=a("58a8").trim,b="Number",C=i[b],_=C.prototype,g=c(m(_))==b,k=function(t){var e,a,s,i,o,n,r,c,l=d(t,!1);if("string"==typeof l&&l.length>2)if(l=p(l),e=l.charCodeAt(0),43===e||45===e){if(a=l.charCodeAt(2),88===a||120===a)return NaN}else if(48===e){switch(l.charCodeAt(1)){case 66:case 98:s=2,i=49;break;case 79:case 111:s=8,i=55;break;default:return+l}for(o=l.slice(2),n=o.length,r=0;r<n;r++)if(c=o.charCodeAt(r),c<48||c>i)return NaN;return parseInt(o,s)}return+l};if(o(b,!C(" 0o1")||!C("0b1")||C("+0x1"))){for(var O,x=function(t){var e=arguments.length<1?0:t,a=this;return a instanceof x&&(g?u((function(){_.valueOf.call(a)})):c(a)!=b)?l(new C(k(e)),a,x):k(e)},w=s?f(C):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),I=0;w.length>I;I++)r(C,O=w[I])&&!r(x,O)&&h(x,O,v(C,O));x.prototype=_,_.constructor=x,n(i,b,x)}},b4a2:function(t,e,a){},b680:function(t,e,a){"use strict";var s=a("23e7"),i=a("a691"),o=a("408a"),n=a("1148"),r=a("d039"),c=1..toFixed,l=Math.floor,d=function(t,e,a){return 0===e?a:e%2===1?d(t,e-1,a*t):d(t*t,e/2,a)},u=function(t){var e=0,a=t;while(a>=4096)e+=12,a/=4096;while(a>=2)e+=1,a/=2;return e},m=c&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!r((function(){c.call({})}));s({target:"Number",proto:!0,forced:m},{toFixed:function(t){var e,a,s,r,c=o(this),m=i(t),f=[0,0,0,0,0,0],v="",h="0",p=function(t,e){var a=-1,s=e;while(++a<6)s+=t*f[a],f[a]=s%1e7,s=l(s/1e7)},b=function(t){var e=6,a=0;while(--e>=0)a+=f[e],f[e]=l(a/t),a=a%t*1e7},C=function(){var t=6,e="";while(--t>=0)if(""!==e||0===t||0!==f[t]){var a=String(f[t]);e=""===e?a:e+n.call("0",7-a.length)+a}return e};if(m<0||m>20)throw RangeError("Incorrect fraction digits");if(c!=c)return"NaN";if(c<=-1e21||c>=1e21)return String(c);if(c<0&&(v="-",c=-c),c>1e-21)if(e=u(c*d(2,69,1))-69,a=e<0?c*d(2,-e,1):c/d(2,e,1),a*=4503599627370496,e=52-e,e>0){p(0,a),s=m;while(s>=7)p(1e7,0),s-=7;p(d(10,s,1),0),s=e-1;while(s>=23)b(1<<23),s-=23;b(1<<s),p(1,1),b(2),h=C()}else p(0,a),p(1<<-e,0),h=C()+n.call("0",m);return m>0?(r=h.length,h=v+(r<=m?"0."+n.call("0",m-r)+h:h.slice(0,r-m)+"."+h.slice(r-m))):h=v+h,h}})},bb8d:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("li",{staticClass:"tag",on:{click:function(e){return t.$emit("current-active",t.activeIndex)}}},[t._v(" "+t._s(t.item)+" ")])},i=[],o=(a("a9e3"),{name:"TagItem",props:{item:String,activeIndex:Number}}),n=o,r=a("2877"),c=Object(r["a"])(n,s,i,!1,null,"6f683784",null);e["a"]=c.exports},bd50:function(t,e,a){},e10d:function(t,e,a){},ef75:function(t,e,a){t.exports=a.p+"img/default.a0b871a6.jpeg"}}]);
//# sourceMappingURL=chunk-19c400b0.35e6d1ab.js.map