(function(t){function e(e){for(var s,i,r=e[0],c=e[1],l=e[2],h=0,g=[];h<r.length;h++)i=r[h],Object.prototype.hasOwnProperty.call(a,i)&&a[i]&&g.push(a[i][0]),a[i]=0;for(s in c)Object.prototype.hasOwnProperty.call(c,s)&&(t[s]=c[s]);u&&u(e);while(g.length)g.shift()();return o.push.apply(o,l||[]),n()}function n(){for(var t,e=0;e<o.length;e++){for(var n=o[e],s=!0,r=1;r<n.length;r++){var c=n[r];0!==a[c]&&(s=!1)}s&&(o.splice(e--,1),t=i(i.s=n[0]))}return t}var s={},a={app:0},o=[];function i(e){if(s[e])return s[e].exports;var n=s[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=t,i.c=s,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)i.d(n,s,function(e){return t[e]}.bind(null,s));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],c=r.push.bind(r);r.push=e,r=r.slice();for(var l=0;l<r.length;l++)e(r[l]);var u=c;o.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},1139:function(t,e,n){"use strict";var s=n("91eb"),a=n.n(s);a.a},"1ac5":function(t,e,n){"use strict";var s=n("2fe6"),a=n.n(s);a.a},2395:function(t,e,n){},"2a41":function(t,e,n){},"2fe6":function(t,e,n){},4045:function(t,e,n){t.exports=n.p+"img/loading.b82d1882.svg"},"45e2":function(t,e,n){"use strict";var s=n("2a41"),a=n.n(s);a.a},"50f2":function(t,e,n){},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var s=n("2b0e"),a=(n("d3b7"),n("bc3a")),o=n.n(a),i={baseURL:"https://music.kele8.cn"},r=o.a.create(i);r.interceptors.request.use((function(t){return t}),(function(t){return Promise.reject(t)})),r.interceptors.response.use((function(t){return t}),(function(t){return Promise.reject(t)})),Plugin.install=function(t,e){t.axios=r,window.axios=r,Object.defineProperties(t.prototype,{axios:{get:function(){return r}},$axios:{get:function(){return r}}})},s["a"].use(Plugin);Plugin;var c=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:{controlsFloat:t.showControls,overflow:t.fullScreenStatus},attrs:{id:"app"},on:{touchstart:t.touchstart,touchend:t.touchend}},[n("keep-alive",[n("router-view",{attrs:{currentSong:t.currentSong},on:{"play-song":function(e){t.currentSong=e}}})],1),t.currentSong?n("PlayController",{attrs:{currentSong:t.currentSong},on:{"play-song":function(e){t.currentSong=e},"translate-full-status":function(e){t.fullScreenStatus=e},"translate-song":function(e){t.currentSong=e}}}):t._e()],1)},l=[],u=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"playbar"},[n("div",{staticClass:"playbarbottom",on:{click:function(e){t.showFullscreen=!0}}},[n("img",{staticClass:"thumb",class:{active:t.playing},attrs:{src:t.currentSongPicUrl,alt:""}}),n("div",{staticClass:"info"},[n("h5",[t._v(t._s(t.currentSongName))]),n("span",[t._v(t._s(t.currentSongArtists))])]),n("div",{staticClass:"progress",on:{click:function(e){e.stopPropagation(),t.playing=!t.playing}}},[n("canvas",{attrs:{width:"36",height:"36",id:"canvas"}}),t.playing?n("i",{staticClass:"fa fa-pause"}):n("i",{staticClass:"fa fa-play"})]),n("div",{staticClass:"playlist",on:{click:function(e){e.stopPropagation(),t.showPlayList=!t.showPlayList}}},[n("i",{staticClass:"fa fa-bars",attrs:{"aria-hidden":"true"}})])]),n("transition",{attrs:{name:"custom-classes-transition","enter-active-class":"animated slideInUp","leave-active-class":"animated slideOutDown"}},[t.showPlayList?n("ul",{staticClass:"defaultPlayList"},t._l(t.defaultPlayList,(function(e,s){return n("SongItem",{key:s,attrs:{songItem:e,options:{order:s,info:!1},currentSong:t.currentSong},on:{"play-song":function(e){return t.$emit("play-song",e)}}})})),1):t._e()]),n("transition",{attrs:{name:"custom-classes-transition","enter-active-class":"animated fadeIn","leave-active-class":"animated fadeOut"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:t.showFullscreen,expression:"showFullscreen"}],staticClass:"fullscreenplay"},[n("div",{staticClass:"mask",style:{backgroundImage:"url("+t.currentSongPicUrl+")",backgroundColor:"black"}}),n("header",[n("i",{staticClass:"fa fa-chevron-left",on:{click:function(e){t.showFullscreen=!1}}}),n("div",{staticClass:"info"},[n("h5",[t._v(t._s(t.currentSongName))]),n("span",[t._v(t._s(t.currentSongArtists))])]),n("i",{staticClass:"fa fa-share-alt"})]),n("div",{directives:[{name:"show",rawName:"v-show",value:t.showCircle,expression:"showCircle"}],staticClass:"circle",class:{active:t.playing},on:{click:function(e){t.showCircle=!1}}},[n("div",{staticClass:"needle"}),n("div",{staticClass:"glue"},[n("img",{attrs:{src:t.currentSongPicUrl,alt:""}})])]),n("div",{directives:[{name:"show",rawName:"v-show",value:!t.showCircle,expression:"!showCircle"}],staticClass:"lyric-box",on:{click:function(e){t.showCircle=!0}}},[n("div",{staticClass:"voice fa"},[t.volume>.5?n("span",{staticClass:"fa-volume-up volume"}):t.volume<.5&&t.volume>0?n("span",{staticClass:"fa-volume-down volume"}):n("span",{staticClass:"fa-volume-off volume"}),n("div",{staticClass:"sound-progress"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.volume,expression:"volume"}],attrs:{type:"range",value:"0",min:"0",step:"0.01",max:"1"},domProps:{value:t.volume},on:{__r:function(e){t.volume=e.target.value}}}),n("div",{staticClass:"progress-active",style:{width:100*t.volume+"%"}}),n("span",{style:{left:100*t.volume+"%"}})])]),n("ul",{staticClass:"scroll"},t._l(t.parsedLyric,(function(e,s){return n("li",{key:s,class:{active:s===t.currentLyricIndex,hidden:s+4<t.currentLyricIndex},style:{transform:"translateY("+40*-t.currentLyricIndex+"px)"}},[t._v(" "+t._s(e.text)+" ")])})),0)]),n("footer",[n("div",{staticClass:"btns"},[n("div",{staticClass:"heart",on:{click:function(e){t.heart=!t.heart}}},[t.heart?n("i",{staticClass:"fa fa-heart"}):n("i",{staticClass:"fa fa-heart-o"})]),n("div",{staticClass:"comment"},[n("Comments",{directives:[{name:"show",rawName:"v-show",value:t.showComments,expression:"showComments"}],attrs:{currentSongId:t.currentSong.id,commentsStatus:t.showComments}}),n("i",{staticClass:"fa fa-commenting",on:{click:function(e){t.showComments=!t.showComments}}})],1),n("div",{staticClass:"menu"},[n("i",{staticClass:"fa fa-ellipsis-v"})])]),n("div",{staticClass:"duration"},[n("span",{staticClass:"start-time"},[t._v(t._s(t.countTime(t.startTime)))]),n("div",{staticClass:"progress"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.progress,expression:"progress"}],attrs:{type:"range",value:"0",min:"0",step:"0.01",max:"100"},domProps:{value:t.progress},on:{input:t.progressChange,__r:function(e){t.progress=e.target.value}}}),n("div",{staticClass:"progress-active",style:{width:t.progress+"%"}}),n("span",{style:{left:t.progress+"%"}})]),n("span",{staticClass:"end-time"},[t._v(t._s(t.countTime(t.endTime)))])]),n("div",{staticClass:"controls"},[n("div",{staticClass:"pattern"},[t.pattern?n("i",{staticClass:"fa fa-retweet",on:{click:function(e){t.pattern=!t.pattern}}}):n("i",{staticClass:"fa fa-random",on:{click:function(e){t.pattern=!t.pattern}}})]),n("div",{staticClass:"play-control"},[n("i",{staticClass:"fa fa-step-backward",on:{click:t.prevSongIndex}}),t.playing?n("i",{staticClass:"fa fa-pause",on:{click:function(e){t.playing=!t.playing}}}):n("i",{staticClass:"fa fa-play",on:{click:function(e){t.playing=!t.playing}}}),n("i",{staticClass:"fa fa-step-forward",on:{click:t.nextSongIndex}})]),n("div",{staticClass:"list"},[n("i",{staticClass:"fa fa-bars",attrs:{"aria-hidden":"true"},on:{click:function(e){e.stopPropagation(),t.showPlayList=!t.showPlayList}}})])])])])]),n("audio",{attrs:{src:t.currentSongUrl,autoplay:""}})],1)},h=[],g=(n("a15b"),n("d81d"),n("45fc"),n("b0c0"),n("a9e3"),n("ac1f"),n("466d"),n("841c"),n("1276"),function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("li",{staticClass:"songitem",on:{click:function(e){return t.$emit("play-song",t.songItem)}}},[void 0!==t.order?s("span",{staticClass:"order"},[t._v(t._s(t.order+1))]):t._e(),s("div",{staticClass:"main",style:{marginLeft:void 0!==t.order?"0px":"10px"}},[s("h3",[t._v(" "+t._s(t.songItem.name)+" "),s("span",{staticClass:"alias"},[t._v(t._s(t.isExists?t.songItem.song.alias[0]:t.songItem.alia[0]))])]),s("div",{staticClass:"info"},[s("i",{staticClass:"icon icon-quality"}),s("span",{staticClass:"artists"},[t._v(t._s(t.isExists?t.joinArtists(t.songItem.song.artists):t.joinArtists(t.songItem.ar)))]),s("span",{staticClass:"album"},[t._v("-"+t._s(t.isExists?t.songItem.song.album.name:t.songItem.al.name))])])]),t.currentSong&&t.songItem.id===t.currentSong.id?s("img",{staticClass:"icon icon-play",staticStyle:{background:"none"},attrs:{src:n("803f"),alt:""}}):s("i",{staticClass:"icon icon-play"})])}),d=[],f={props:{order:Number,songItem:Object,currentSong:Object},computed:{isExists:function(){return!!this.songItem.song}},methods:{joinArtists:function(t){return t.map((function(t){return t.name})).join(" / ")}}},m=f,p=(n("b3f4"),n("2877")),v=Object(p["a"])(m,g,d,!1,null,"fba8559c",null),S=v.exports,y=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("transition",{attrs:{name:"custom-classes-transition","enter-active-class":"animated slideInUp","leave-active-class":"animated slideOutDown"}},[n("div",{attrs:{id:"comments-content"}},[n("div",{staticClass:"hot-comment"},[n("header",[n("span",{staticClass:"hot-comments"},[t._v(t._s("hotComments"==t.value?"热门评论":"评论"))]),n("select",{directives:[{name:"model",rawName:"v-model",value:t.value,expression:"value"}],attrs:{name:"comment"},on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.value=e.target.multiple?n:n[0]}}},[n("option",{attrs:{value:"hotComments"}},[t._v("热门评论")]),n("option",{attrs:{value:"comments"}},[t._v("评论")])])]),n("section",{directives:[{name:"show",rawName:"v-show",value:null!=t.comments,expression:"comments != null"}]},[n("ul",{staticClass:"comments-main"},t._l(t.comments,(function(e,s){return n("li",{key:s,staticClass:"comment"},[n("div",{staticClass:"header"},[n("div",{staticClass:"thumb"},[n("img",{attrs:{src:e.user.avatarUrl}})]),n("div",{staticClass:"info"},[n("h5",{staticClass:"nick-name"},[t._v(" "+t._s(e.user.nickname)+" ")]),n("span",{staticClass:"time"},[t._v(t._s(t.formatDate(e.time)))])]),n("div",{staticClass:"liked"},[e.liked?n("i",{staticClass:"fa fa-thumbs-up"}):n("i",{staticClass:"fa fa-thumbs-o-up"}),n("span",[t._v(t._s(e.likedCount))])])]),n("div",{staticClass:"content"},[t._v(" "+t._s(e.content)+" ")])])})),0)])])])])},C=[],w={props:{currentSongId:Number,commentsStatus:Boolean},data:function(){return{value:"hotComments",allComments:[]}},computed:{comments:function(){return"hotComments"==this.value?this.allComments.hotComments:this.allComments.comments}},methods:{formatDate:function(t){var e=new Date(t),n=e.getFullYear(),s=e.getMonth()+1,a=e.getDate();return s=s>9?s:"0"+a,a=a>9?a:"0"+a,n+"年 "+s+"月 "+a+"日"}},watch:{commentsStatus:function(t){t||(this.value="hotComments")}},created:function(){var t=this,e=JSON.parse(localStorage.getItem("allComments"+this.currentSongId));e&&e.exipre>Date.now()?this.allComments=e.result:this.axios.get("/comment/music",{params:{id:this.currentSongId}}).then((function(e){t.allComments=e.data,localStorage.setItem("allComments"+t.currentSongId,JSON.stringify({exipre:Date.now()+36e5,result:e.data}))}))}},x=w,_=(n("eaed"),Object(p["a"])(x,y,C,!1,null,"30f67713",null)),b=_.exports,I={props:{currentSong:Object},components:{SongItem:S,Comments:b},data:function(){return{playing:!1,showFullscreen:!1,showCircle:!1,currentLyric:null,currentLyricIndex:0,showPlayList:!1,defaultPlayList:[this.currentSong],volume:0,heart:!1,progress:0,startTime:0,endTime:0,currentSongIndex:0,pattern:!0,showComments:!1}},methods:{joinArtists:function(t){return t.map((function(t){return t.name})).join(" / ")},drawProgress:function(){var t,e=this,n=this.$el.querySelector("#canvas"),s=this.$el.querySelector("audio");t=this.currentSong.song?this.currentSong.song.duration:this.currentSong.dt,s.ontimeupdate=function(){var a,o=n.getContext("2d");if(o.clearRect(0,0,36,36),o.beginPath(),o.arc(18,18,17,0,2*Math.PI),o.closePath(),o.strokeStyle="gray",o.lineWidth="1",o.stroke(),o.beginPath(),o.arc(18,18,17,-.5*Math.PI,-.5*Math.PI+2*Math.PI*(1e3*s.currentTime/t)),o.strokeStyle="rgba(255,0,0,0.7)",o.lineWidth="1",o.stroke(),null!=e.parsedLyric){for(var i=0;i<e.parsedLyric.length;i++)if(s.currentTime+.15<e.parsedLyric[i].time){a=i-1;break}void 0===a&&(a=e.parsedLyric.length-1),e.currentLyricIndex=a}e.progress=s.currentTime/s.duration*100,e.startTime=s.currentTime}},getLyric:function(){var t=this,e=window.localStorage.getItem("lyric"+this.currentSong.id);e?this.currentLyric=e:window.axios.get("lyric",{params:{id:this.currentSong.id}}).then((function(e){e.data.lrc?(t.currentLyric=e.data.lrc.lyric,window.localStorage.setItem("lyric"+t.currentSong.id,e.data.lrc.lyric)):t.currentLyric=null}))},countTime:function(t){t=Math.floor(t);var e=Math.floor(t/60),n=t%60;return e=e>9?e:"0"+e,n=n>9?n:"0"+n,e+":"+n},progressChange:function(){var t=this.$el.querySelector("audio");t.currentTime=this.progress*t.duration/100},nextRandomSongIndex:function(t){var e=Math.floor(Math.random()*this.defaultPlayList.length);return t==this.defaultPlayList.length-1?0:e>t&&e<=this.defaultPlayList.length-1?e:e<=t?this.nextRandomSongIndex(t):void 0},prevRandomSongIndex:function(t){var e=Math.floor(Math.random()*this.defaultPlayList.length);return 0==t?this.defaultPlayList.length-1:e<t&&e>=0?e:e>=t?this.prevRandomSongIndex(t):void 0},nextSongIndex:function(){this.defaultPlayList.length>=1&&(this.pattern?(this.currentSongIndex++,this.currentSongIndex>this.defaultPlayList.length-1&&(this.currentSongIndex=0)):this.currentSongIndex=this.nextRandomSongIndex(this.currentSongIndex))},prevSongIndex:function(){this.defaultPlayList.length>=1&&(this.pattern?(this.currentSongIndex--,this.currentSongIndex<0&&(this.currentSongIndex=this.defaultPlayList.length-1)):this.currentSongIndex=this.prevRandomSongIndex(this.currentSongIndex))}},computed:{currentSongPicUrl:function(){return this.currentSong.song?this.currentSong.picUrl:this.currentSong.al.picUrl},currentSongName:function(){return this.currentSong.name},currentSongArtists:function(){return this.currentSong.song?this.joinArtists(this.currentSong.song.artists):this.joinArtists(this.currentSong.ar)},currentSongUrl:function(){return this.defaultPlayList.length>0?"https://music.163.com/song/media/outer/url?id=".concat(this.currentSong.id,".mp3"):""},parsedLyric:function(){return null!=this.currentLyric?this.currentLyric.split("\n").map((function(t){var e=/\d{2}:\d{2}\.\d+/i;if(-1!==t.search(e)){var n,s=t.match(e)[0],a=s.substr(0,2),o=s.substr(3,2),i=s.substr(5);return 9==s.length?n=t.substr(11):8==s.length&&(n=t.substr(10)),{time:60*Number(a)+Number(o)+Number(i),text:n||"---"}}return{}})):[{time:864e5,text:"暂无歌词"}]}},created:function(){this.getLyric()},mounted:function(){var t=this,e=this.$el.querySelector("audio");this.volume=e.volume,this.drawProgress(),e.onerror=function(){alert("歌曲加载失败"),t.currentSongIndex<t.defaultPlayList.length-1?t.currentSongIndex++:t.currentSongIndex=0},e.onplay=function(){t.playing=!0},e.onpause=function(){t.playing=!1},e.ondurationchange=function(){t.endTime=e.duration},e.onended=function(){t.defaultPlayList.length>1&&(t.pattern?(t.currentSongIndex++,t.currentSongIndex>t.defaultPlayList.length-1&&(t.currentSongIndex=0)):t.currentSongIndex=t.nextRandomSongIndex(t.currentSongIndex))}},watch:{playing:function(t){var e=this.$el.querySelector("audio");t?e.play():e.pause()},currentSong:function(t){this.getLyric();var e=this.defaultPlayList.some((function(e){return e.id==t.id}));e||this.defaultPlayList.push(t);for(var n=0;n<this.defaultPlayList.length;n++)t==this.defaultPlayList[n]&&(this.currentSongIndex=n)},volume:function(t){var e=this.$el.querySelector("audio");e.volume=t},showFullscreen:function(t){t&&(this.showPlayList=!1,this.showComments=!1),this.$emit("translate-full-status",t)},currentSongIndex:function(t){this.$emit("translate-song",this.defaultPlayList[t])}}},k=I,L=(n("d894"),Object(p["a"])(k,u,h,!1,null,"c1c620a2",null)),P=L.exports,j={components:{PlayController:P},data:function(){return{currentSong:null,touchstartX:0,fullScreenStatus:!1}},computed:{showControls:function(){return null!=this.currentSong}},methods:{touchstart:function(t){this.fullScreenStatus||(this.touchstartX=t.changedTouches[0].clientX)},touchend:function(t){this.fullScreenStatus||(t.changedTouches[0].clientX-this.touchstartX>50&&(this.touchstartX=0,this.routerBack()),t.changedTouches[0].clientX-this.touchstartX<-50&&(this.touchstartX=0,this.routerForward()))},routerBack:function(){this.$router.back()},routerForward:function(){this.$router.forward()}}},D=j,O=(n("7c55"),Object(p["a"])(D,c,l,!1,null,null,null)),N=O.exports,$=n("8c4f"),T=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"home"},[t.showLoading?s("div",{staticClass:"loading"},[s("img",{attrs:{src:n("4045")}})]):t._e(),s("NavLink"),s("div",{staticClass:"songsheet"},[s("CardTitle",[t._v("推荐歌单")]),s("ul",{staticClass:"songlist"},t._l(t.randomSongSheets(),(function(e,n){return s("SongSheetCard",{key:n,attrs:{item:e,currentSong:t.currentSong},on:{"play-song":function(e){return t.$emit("play-song",e)}}})})),1)],1),s("div",{staticClass:"newsong"},[s("CardTitle",[t._v("最新音乐")]),s("ul",t._l(t.newsongs,(function(e,n){return s("SongItem",{key:n,attrs:{songItem:e,options:{info:!0},currentSong:t.currentSong},on:{"play-song":function(e){return t.$emit("play-song",e)}}})})),1)],1)],1)},M=[],E=(n("a434"),n("2909")),U=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("ul",{attrs:{id:"nav"}},[n("li",[n("router-link",{attrs:{to:"/"}},[t._v("推荐音乐")])],1),n("li",[n("router-link",{attrs:{to:"/hot"}},[t._v("热歌榜")])],1),n("li",[n("router-link",{attrs:{to:"/search"}},[t._v("搜索")])],1)])},R=[],F={},q=F,A=(n("e61d"),Object(p["a"])(q,U,R,!1,null,"4af3a005",null)),J=A.exports,W=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("h3",[t._t("default")],2)},X=[],K={},B=K,H=(n("1139"),Object(p["a"])(B,W,X,!1,null,"c017081c",null)),z=H.exports,G=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("li",{staticClass:"card",on:{click:function(e){return t.routerToSongSheetPage(t.item.id)}}},[n("div",{staticClass:"thumb"},[n("img",{attrs:{src:t.item.picUrl}}),n("span",[n("i",{staticClass:"fa fa-headphones"}),t._v(" "+t._s(t.playCount)+" ")])]),n("h5",[t._v(t._s(t.item.name))])])},Y=[],Q=(n("b680"),{props:{item:{type:Object,default:function(){return{id:4969079749,type:0,name:"欧美 | 欢快小调拯救你的不开心",copywriter:"编辑推荐：音乐是治愈人心的良药",picUrl:"https://p2.music.126.net/nflx5ZxSSPivvGnyS5WRGw==/109951164906376339.jpg",canDislike:!1,trackNumberUpdateTime:1586934907095,playCount:1209355,trackCount:100,highQuality:!1,alg:"featured"}}}},computed:{playCount:function(){return this.item.playCount>1e8?(this.item.playCount/1e8).toFixed(1)+"亿":this.item.playCount>1e5?(this.item.playCount/1e4).toFixed(1)+"万":this.item.playCount}},methods:{routerToSongSheetPage:function(t){this.$router.push({path:"songsheet",query:{id:t}})}}}),Z=Q,V=(n("cd5b"),Object(p["a"])(Z,G,Y,!1,null,"7b1bd24a",null)),tt=V.exports,et={name:"Home",props:{currentSong:Object},data:function(){return{songsheets:[],newsongs:[],showLoading:!1,showControls:!0}},components:{CardTitle:z,SongSheetCard:tt,NavLink:J,SongItem:S},methods:{getSongSheets:function(){var t=this;this.axios.get("/personalized").then((function(e){t.songsheets=e.data.result,localStorage.setItem("songSList",JSON.stringify({expire:Date.now()+36e5,result:e.data.result}))})).catch((function(t){console.log(t)}))},getNewSong:function(){var t=this;this.axios.get("/personalized/newsong").then((function(e){t.newsongs=e.data.result,localStorage.setItem("newsongs",JSON.stringify({expire:Date.now()+36e5,result:e.data.result}))})).catch((function(t){console.log(t)}))},randomSongSheets:function(){for(var t=Object(E["a"])(this.songsheets),e=[],n=0;n<6;n++){var s=Math.floor(Math.random()*t.length);e.push.apply(e,Object(E["a"])(t.splice(s,1)))}return e}},created:function(){var t=JSON.parse(localStorage.getItem("songSList"));t&&t.expire>Date.now()?this.songsheets=t.result:this.getSongSheets();var e=JSON.parse(localStorage.getItem("newsongs"));e&&e.expire>Date.now()?this.newsongs=e.result:this.getNewSong()},beforeRouteEnter:function(t,e,n){n((function(t){t.showLoading=!1}))},beforeRouteLeave:function(t,e,n){this.showLoading=!0,n()}},nt=et,st=(n("de16"),Object(p["a"])(nt,T,M,!1,null,null,null)),at=st.exports,ot=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"hot"},[n("NavLink"),n("div",{staticClass:"bg"},[n("div",{staticClass:"hot-thumb"},[n("div",{staticClass:"thumb"}),n("div",{staticClass:"time"},[t._v("更新时间:"+t._s(t.time))])])]),n("ul",t._l(t.songList,(function(e,s){return n("SongItem",{key:s,attrs:{songItem:e,order:s,currentSong:t.currentSong},on:{"play-song":function(e){return t.$emit("play-song",e)}}})})),1)],1)},it=[],rt={props:{currentSong:Object},data:function(){return{showLoading:!1,hotSong:null,songList:null}},components:{NavLink:J,SongItem:S},computed:{time:function(){return null!=this.hotSong?this.formatDate(this.hotSong.trackUpdateTime):""}},methods:{formatDate:function(t){var e=new Date(t),n=e.getMonth()+1,s=e.getDate();return n=n>9?n:"0"+s,s=s>9?s:"0"+s,n+"月 "+s+"日"}},watch:{hotSong:function(t){for(var e=this,n=[],s=0;s<t.trackIds.length;s++)n.push(t.trackIds[s].id);window.axios.get("/song/detail",{params:{ids:n.join(",")}}).then((function(t){var n=t.data.songs;e.songList=n})).catch((function(t){console.log(t)}))}},beforeRouteEnter:function(t,e,n){var s=JSON.parse(localStorage.getItem("hotSong"));s&&s.exipre>Date.now()?n((function(t){t.hotSong=s.result})):window.axios.get("/top/list",{params:{idx:1}}).then((function(t){var e=t.data.playlist;localStorage.setItem("hotSong",JSON.stringify({exipre:Date.now()+36e5,result:e})),n((function(t){t.hotSong=e}))})).catch((function(t){console.log(t)}))}},ct=rt,lt=(n("1ac5"),Object(p["a"])(ct,ot,it,!1,null,"69d2f410",null)),ut=lt.exports,ht=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"search"},[null==t.songList&&0!=t.text.length&&null===t.suggest?s("div",{staticClass:"loading"},[s("img",{attrs:{src:n("4045")}})]):t._e(),s("NavLink"),s("div",{staticClass:"sr"},[s("i",{staticClass:"fa fa-search"}),s("i",{directives:[{name:"show",rawName:"v-show",value:0!=t.text.length,expression:"text.length != 0"}],staticClass:"fa fa-times-circle",on:{click:function(e){t.text=""}}}),s("input",{directives:[{name:"model",rawName:"v-model",value:t.text,expression:"text"}],attrs:{type:"text",placeholder:"搜索歌曲、歌手、专辑"},domProps:{value:t.text},on:{input:function(e){e.target.composing||(t.text=e.target.value)}}})]),s("div",{directives:[{name:"show",rawName:"v-show",value:0==t.text.length,expression:"text.length == 0"}],staticClass:"hot-keyword"},[s("div",{staticClass:"title"},[t._v(" 热门搜索 ")]),s("ul",{staticClass:"hot-list"},t._l(t.hots,(function(e,n){return s("li",{key:n,staticClass:"hot",on:{click:function(e){return t.submitDefaultKeyWord(n)}}},[t._v(" "+t._s(e.first)+" ")])})),0)]),s("div",{directives:[{name:"show",rawName:"v-show",value:0!=t.text.length&&null==t.songList,expression:"text.length != 0 && songList == null"}],staticClass:"suggest-keyword"},[s("div",{staticClass:"defaultSuggest",on:{click:function(e){return t.searchSong(t.text)}}},[t._v(' 搜索"'+t._s(t.text)+'" ')]),s("ul",{staticClass:"suggest-list"},t._l(t.suggest,(function(e,n){return s("li",{key:n,staticClass:"suggest",on:{click:function(e){return t.submitSuggestKeyWord(n)}}},[s("i",{staticClass:"fa fa-search"}),s("span",[t._v(t._s(e.keyword))])])})),0)]),s("div",{directives:[{name:"show",rawName:"v-show",value:null!=t.songList&&0!=t.text.length,expression:"songList != null && text.length != 0"}],staticClass:"song-list"},[s("ul",t._l(t.songList,(function(e,n){return s("SongItem",{key:n,attrs:{songItem:e,order:n,currentSong:t.currentSong},on:{"play-song":function(e){return t.$emit("play-song",e)}}})})),1)])],1)},gt=[],dt={props:{currentSong:Object},data:function(){return{text:"",hots:null,suggest:null,songList:null}},components:{NavLink:J,SongItem:S},methods:{submitKeyWord:function(t){var e=this;window.axios.get("/search/suggest",{params:{keywords:t,type:"mobile"}}).then((function(t){e.suggest=t.data.result.allMatch})).catch((function(t){console.log(t)}))},submitDefaultKeyWord:function(t){this.text=this.hots[t].first,this.searchSong(this.hots[t].first)},submitSuggestKeyWord:function(t){this.text=this.suggest[t].keyword,this.searchSong(this.suggest[t].keyword)},searchSong:function(t){var e=this;this.suggest=null,window.axios.get("/search",{params:{keywords:t}}).then((function(t){for(var n=t.data.result.songs,s=[],a=0;a<n.length;a++)s.push(n[a].id);window.axios.get("/song/detail",{params:{ids:s.join(",")}}).then((function(t){e.songList=t.data.songs})).catch((function(t){console.log(t)}))})).catch((function(t){console.log(t)}))}},watch:{text:function(t){var e,n=this;0==t.length&&(this.songList=null),e=setTimeout((function(){clearTimeout(e),n.submitKeyWord(t)}),1e3)}},beforeRouteEnter:function(t,e,n){window.axios.get("/search/hot").then((function(t){var e=t.data.result.hots;n((function(t){t.hots=e}))})).catch((function(t){console.log(t)}))},beforeRouteLeave:function(t,e,n){this.hots=null,this.suggest=null,this.songList=null,this.text="",n()}},ft=dt,mt=(n("86f1"),Object(p["a"])(ft,ht,gt,!1,null,"3cdcef3b",null)),pt=mt.exports,vt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return null!=t.songSheetDetail?n("div",{staticClass:"palylist"},[n("div",{staticClass:"header"},[n("div",{staticClass:"mask",style:{backgroundImage:"url("+t.songSheetDetail.coverImgUrl+")"}}),n("div",{staticClass:"fl"},[n("img",{attrs:{src:t.songSheetDetail.coverImgUrl,alt:""}}),n("span",{staticClass:"playcount"},[n("i",{staticClass:"fa fa-headphones"}),t._v(" "+t._s(t.songSheetPlayCount)+" ")]),n("span",{staticClass:"icon"},[t._v("歌单")])]),n("div",{staticClass:"fr"},[n("h3",[t._v(t._s(t.songSheetDetail.name))]),n("img",{attrs:{src:t.songSheetDetail.creator.avatarUrl,alt:""}}),n("span",[t._v(t._s(t.songSheetDetail.creator.nickname))])])]),n("div",{staticClass:"info"},[n("div",{staticClass:"tags"},[n("span",[t._v("标签：")]),t._l(t.songSheetDetail.tags,(function(e,s){return n("i",{key:s},[t._v(t._s(e))])}))],2),n("div",{staticClass:"desc",class:{show:t.showMoreDesc}},[n("span",[t._v("简介：")]),n("span",[t._v(t._s(t.songSheetDetail.description))])]),n("div",{staticClass:"more",on:{click:function(e){t.showMoreDesc=!t.showMoreDesc}}},[t.showMoreDesc?n("i",{staticClass:"fa fa-angle-up"}):n("i",{staticClass:"fa fa-angle-down"})])]),t._m(0),n("ul",t._l(t.songDetail,(function(e,s){return n("SongItem",{key:s,attrs:{songItem:e,order:s,currentSong:t.currentSong},on:{"play-song":function(e){return t.$emit("play-song",e)}}})})),1)]):t._e()},St=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"list"},[n("div",{staticClass:"title"},[t._v("歌曲列表")])])}],yt={props:{currentSong:Object},data:function(){return{songSheetId:this.$route.query.id,songSheetDetail:null,songDetail:null,showMoreDesc:!1}},components:{SongItem:S},computed:{songSheetPlayCount:function(){return this.songSheetDetail.playCount>1e8?(this.songSheetDetail.playCount/1e8).toFixed(1)+"亿":this.songSheetDetail.playCount>1e5?(this.songSheetDetail.playCount/1e4).toFixed(1)+"万":this.songSheetDetail.playCount}},beforeRouteEnter:function(t,e,n){window.axios.get("/playlist/detail",{params:{id:t.query.id}}).then((function(e){for(var s=e.data.playlist,a=[],o=0;o<s.trackIds.length;o++)a.push(s.trackIds[o].id);window.axios.get("/song/detail",{params:{ids:a.join(",")}}).then((function(e){var a=e.data.songs;n((function(e){e.songSheetId=Number(t.query.id),e.songSheetDetail=s,e.songDetail=a}))})).catch((function(t){console.log(t)}))})).catch((function(t){console.log(t)}))}},Ct=yt,wt=(n("45e2"),Object(p["a"])(Ct,vt,St,!1,null,"c96dc9fe",null)),xt=wt.exports;s["a"].use($["a"]);var _t=[{path:"/",name:"Home",component:at},{path:"/hot",name:"Hot",component:ut},{path:"/search",name:"Search",component:pt},{path:"/songsheet",name:"SongSheet",component:xt,meta:{requiresAuth:!0}}],bt=new $["a"]({routes:_t}),It=bt;s["a"].config.productionTip=!1,new s["a"]({router:It,render:function(t){return t(N)}}).$mount("#app")},"7a41":function(t,e,n){},"7c55":function(t,e,n){"use strict";var s=n("2395"),a=n.n(s);a.a},"803f":function(t,e,n){t.exports=n.p+"img/playing.ab1993a5.svg"},"86f1":function(t,e,n){"use strict";var s=n("aef0"),a=n.n(s);a.a},"8d91":function(t,e,n){},"91eb":function(t,e,n){},"96e2":function(t,e,n){},a631:function(t,e,n){},aef0:function(t,e,n){},b3f4:function(t,e,n){"use strict";var s=n("7a41"),a=n.n(s);a.a},cd5b:function(t,e,n){"use strict";var s=n("96e2"),a=n.n(s);a.a},d894:function(t,e,n){"use strict";var s=n("a631"),a=n.n(s);a.a},de16:function(t,e,n){"use strict";var s=n("8d91"),a=n.n(s);a.a},df1f:function(t,e,n){},e61d:function(t,e,n){"use strict";var s=n("df1f"),a=n.n(s);a.a},eaed:function(t,e,n){"use strict";var s=n("50f2"),a=n.n(s);a.a}});
//# sourceMappingURL=app.a0b16538.js.map